<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MS 2026 Tipovaƒçka</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
            --winner: #22c55e;
            --warning: #f59e0b;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: -apple-system, system-ui, sans-serif;
            margin: 0; padding: 10px; line-height: 1.4;
        }

        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; color: var(--accent); font-size: 1.4rem; margin: 15px 0; }

        /* Skl√°dac√≠ skupiny */
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .group-wrapper { position: relative; }

        .group-header {
            background: var(--card);
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px 5px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .group-header.completed { border-color: var(--winner); color: var(--winner); }
        .group-header.active { background: var(--accent); color: var(--bg); }

        .group-content {
            display: none;
            position: absolute;
            top: 100%; left: 0; right: 0;
            background: #1e293b;
            z-index: 100;
            padding: 10px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            width: 250px;
            left: 50%; transform: translateX(-50%);
        }

        @media (max-width: 400px) { .group-content { width: 200px; } }

        .team-item {
            background: #334155;
            margin: 5px 0; padding: 10px;
            border-radius: 6px; display: flex;
            justify-content: space-between; font-size: 0.9rem;
        }

        /* Sekce pro v√Ωbƒõr 3. m√≠st */
        #third-place-section {
            display: none;
            background: rgba(245, 158, 11, 0.1);
            padding: 15px; border-radius: 12px; margin: 20px 0;
            border: 1px solid var(--warning);
        }

        .third-place-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 8px;
        }

        .third-item {
            background: var(--card); padding: 10px; border-radius: 6px;
            font-size: 0.8rem; cursor: pointer; text-align: center;
        }

        .third-item.selected { background: var(--warning); color: var(--bg); font-weight: bold; }

        .btn-main {
            width: 100%; background: var(--accent); color: var(--bg);
            border: none; padding: 15px; font-weight: bold;
            border-radius: 10px; margin: 10px 0; font-size: 1rem;
        }

        #playoff-section { display: none; margin-top: 30px; }
        .matchup { background: var(--card); padding: 12px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #334155; }
        .playoff-team { padding: 10px; background: #334155; margin: 5px 0; border-radius: 6px; cursor: pointer; }
        .playoff-team.selected { background: var(--winner); }
    </style>
</head>
<body>

<div class="container">
    <h1>üèÜ MS 2026 TIPOVAƒåKA</h1>
    
    <div class="groups-grid" id="groups-grid"></div>

    <button id="confirm-groups-btn" class="btn-main" onclick="showThirdPlaceSelection()">POTVRDIT SKUPINY</button>

    <div id="third-place-section">
        <h3 style="color:var(--warning); margin-top:0">Vyber 8 postupuj√≠c√≠ch ze 3. m√≠st</h3>
        <p style="font-size:0.7rem">Na MS 2026 postupuje 8 nejlep≈°√≠ch t√Ωm≈Ø, kter√© skonƒçily na 3. m√≠stƒõ.</p>
        <div id="third-place-list" class="third-place-grid"></div>
        <button class="btn-main" style="background:var(--warning)" onclick="startFinalPlayoff()">VYGENEROVAT PAVOUKA</button>
    </div>

    <div id="playoff-section">
        <h2 style="text-align:center">PAVOUK (ROUND OF 32)</h2>
        <div id="bracket-list"></div>
    </div>
</div>

<script>
    const teams = ["ƒåesko", "Slovensko", "Braz√≠lie", "Argentina", "Francie", "Anglie", "≈†panƒõlsko", "It√°lie", "Nƒõmecko", "Portugalsko", "Nizozemsko", "Belgie", "Chorvatsko", "Uruguay", "Maroko", "Japonsko", "USA", "Mexiko", "Kanada", "Senegal", "Polsko", "D√°nsko", "≈†v√Ωcarsko", "Srbsko", "Korea", "Austr√°lie", "Egypt", "Tunisko", "Nig√©rie", "Al≈æ√≠rsko", "Katar", "Sa√∫dsk√° Ar√°bie", "Rakousko", "Turecko", "Ukrajina", "Maƒèarsko", "Norsko", "≈†v√©dsko", "Skotsko", "Wales", "Kolumbie", "Chile", "Ekv√°dor", "Peru", "Paraguay", "Ghana", "Kamerun", "Island"];

    function init() {
        const grid = document.getElementById('groups-grid');
        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const gTeams = teams.slice(i * 4, i * 4 + 4);
            grid.innerHTML += `
                <div class="group-wrapper">
                    <div class="group-header" id="head-${letter}" onclick="toggleGroup('${letter}')">Skupina ${letter}</div>
                    <div class="group-content" id="cont-${letter}">
                        <div class="team-list" id="L-${letter}">
                            ${gTeams.map((t, idx) => `
                                <div class="team-item" onclick="moveUp(this, '${letter}')">
                                    <span>${t}</span>
                                    <span class="badge">${idx+1}</span>
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn-main" style="padding:5px; margin-top:10px" onclick="toggleGroup('${letter}')">Zav≈ô√≠t</button>
                    </div>
                </div>
            `;
        }
    }

    function toggleGroup(letter) {
        const contents = document.querySelectorAll('.group-content');
        const content = document.getElementById(`cont-${letter}`);
        const header = document.getElementById(`head-${letter}`);
        const isVisible = content.style.display === 'block';
        
        contents.forEach(c => c.style.display = 'none');
        document.querySelectorAll('.group-header').forEach(h => h.classList.remove('active'));
        
        if (!isVisible) {
            content.style.display = 'block';
            header.classList.add('active');
        }
        header.classList.add('completed');
    }

    function moveUp(el, letter) {
        const list = document.getElementById(`L-${letter}`);
        if (el.previousElementSibling) {
            list.insertBefore(el, el.previousElementSibling);
            list.querySelectorAll('.badge').forEach((b, i) => b.innerText = i + 1);
        } else {
            list.appendChild(el); // Pokud je naho≈ôe, skoƒç√≠ dol≈Ø
            list.querySelectorAll('.badge').forEach((b, i) => b.innerText = i + 1);
        }
    }

    function showThirdPlaceSelection() {
        const list = document.getElementById('third-place-list');
        list.innerHTML = '';
        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const thirdTeam = document.querySelectorAll(`#L-${letter} .team-item span:first-child`)[2].innerText;
            list.innerHTML += `<div class="third-item" onclick="this.classList.toggle('selected')">${thirdTeam} (${letter})</div>`;
        }
        document.getElementById('third-place-section').style.display = 'block';
        document.getElementById('confirm-groups-btn').style.display = 'none';
        window.scrollTo({ top: document.getElementById('third-place-section').offsetTop, behavior: 'smooth' });
    }

    function startFinalPlayoff() {
        const selectedThirds = document.querySelectorAll('.third-item.selected');
        if (selectedThirds.length !== 8) {
            alert("Mus√≠≈° vybrat p≈ôesnƒõ 8 t√Ωm≈Ø ze 3. m√≠st!");
            return;
        }

        const finalists = [];
        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const items = document.querySelectorAll(`#L-${letter} .team-item span:first-child`);
            finalists.push(items[0].innerText); // 1. m√≠sto
            finalists.push(items[1].innerText); // 2. m√≠sto
        }
        selectedThirds.forEach(t => finalists.push(t.innerText.split(' (')[0]));

        const bracket = document.getElementById('bracket-list');
        bracket.innerHTML = '';
        // N√°hodn√© prom√≠ch√°n√≠ pro pavouka 32 t√Ωm≈Ø
        finalists.sort(() => Math.random() - 0.5);

        for (let i = 0; i < 16; i++) {
            bracket.innerHTML += `
                <div class="matchup">
                    <div class="playoff-team" onclick="this.parentElement.querySelectorAll('.playoff-team').forEach(p=>p.classList.remove('selected')); this.classList.add('selected')">${finalists[i*2]}</div>
                    <div class="playoff-team" onclick="this.parentElement.querySelectorAll('.playoff-team').forEach(p=>p.classList.remove('selected')); this.classList.add('selected')">${finalists[i*2+1]}</div>
                </div>
            `;
        }
        document.getElementById('playoff-section').style.display = 'block';
        window.scrollTo({ top: document.getElementById('playoff-section').offsetTop, behavior: 'smooth' });
    }

    window.onload = init;
</script>
</body>
</html>
