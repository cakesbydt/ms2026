<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MS 2026 Tipovaƒçka</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
            --winner: #22c55e;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: -apple-system, system-ui, sans-serif;
            margin: 0; padding: 10px;
            overflow-x: hidden;
        }

        .tournament-container { max-width: 800px; margin: 0 auto; }

        h1 { text-align: center; font-size: 1.5rem; color: var(--accent); margin: 20px 0; }

        /* Skupiny - Mobiln√≠ Grid */
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 10px;
        }

        @media (max-width: 480px) {
            .groups-grid { grid-template-columns: 1fr 1fr; }
        }

        .group-card {
            background: var(--card);
            border-radius: 10px;
            padding: 10px;
            border: 1px solid #334155;
        }

        .group-card h3 { 
            margin: 0 0 10px 0; font-size: 0.9rem; text-align: center; 
            border-bottom: 1px solid #334155; padding-bottom: 5px;
        }

        .team-list { list-style: none; padding: 0; margin: 0; }

        .team-item {
            background: #334155;
            margin: 4px 0;
            padding: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            touch-action: none; /* D≈Øle≈æit√© pro drag na mobilu */
        }

        .rank-badge {
            font-size: 0.7rem;
            background: var(--bg);
            width: 18px; height: 18px;
            display: flex; justify-content: center; align-items: center;
            border-radius: 50%; color: var(--accent);
        }

        /* Pavouk / Playoff */
        #playoff-section {
            margin-top: 30px;
            display: none;
        }

        .matchup {
            background: var(--card);
            margin: 15px 0;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--accent);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .matchup-title { font-size: 0.7rem; color: var(--accent); text-align: center; }

        .playoff-team {
            background: #334155;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            cursor: pointer;
            transition: 0.2s;
        }

        .playoff-team.selected {
            background: var(--winner);
            font-weight: bold;
        }

        .btn-main {
            width: 100%;
            background: var(--accent);
            color: var(--bg);
            border: none;
            padding: 15px;
            font-weight: bold;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1rem;
        }
    </style>
</head>
<body>

<div class="tournament-container">
    <h1>üèÜ MS 2026 TIPOVAƒåKA</h1>
    
    <div id="groups-grid" class="groups-grid"></div>

    <button class="btn-main" onclick="startPlayoff()">POTVRDIT A HR√ÅT PAVOUKA</button>

    <div id="playoff-section">
        <h2 style="text-align:center">VY≈òAZOVAC√ç BOJE (1/16)</h2>
        <p style="text-align:center; font-size: 0.8rem; opacity: 0.7;">Klikni na t√Ωm, kter√Ω podle tebe postoup√≠ d√°l.</p>
        <div id="bracket-list"></div>
    </div>
</div>

<script>
    const teams = [
        "ƒåesko", "Slovensko", "Braz√≠lie", "Argentina", "Francie", "Anglie", "≈†panƒõlsko", "It√°lie",
        "Nƒõmecko", "Portugalsko", "Nizozemsko", "Belgie", "Chorvatsko", "Uruguay", "Maroko", "Japonsko",
        "USA", "Mexiko", "Kanada", "Senegal", "Polsko", "D√°nsko", "≈†v√Ωcarsko", "Srbsko",
        "Korea", "Austr√°lie", "Egypt", "Tunisko", "Nig√©rie", "Al≈æ√≠rsko", "Katar", "Sa√∫dsk√° Ar√°bie",
        "Rakousko", "Turecko", "Ukrajina", "Maƒèarsko", "Norsko", "≈†v√©dsko", "Skotsko", "Wales",
        "Kolumbie", "Chile", "Ekv√°dor", "Peru", "Paraguay", "Ghana", "Kamerun", "Island"
    ];

    function init() {
        const grid = document.getElementById('groups-grid');
        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const groupTeams = teams.slice(i * 4, i * 4 + 4);
            grid.innerHTML += `
                <div class="group-card">
                    <h3>Skupina ${letter}</h3>
                    <ul class="team-list" id="L-${letter}" ondragover="allowDrop(event)">
                        ${groupTeams.map((t, idx) => `
                            <li class="team-item" draggable="true" ondragstart="drag(event)">
                                <span class="t-name">${t}</span>
                                <span class="rank-badge">${idx+1}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }
        setupTouch();
    }

    // Drag & Drop
    function allowDrop(e) { e.preventDefault(); }
    function drag(e) { e.dataTransfer.setData("text", e.target.innerHTML); window.dragEl = e.target; }
    
    document.addEventListener('dragover', (e) => {
        const list = e.target.closest('.team-list');
        if (!list) return;
        const afterElement = Array.from(list.querySelectorAll('.team-item:not(.dragging)')).reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = e.clientY - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) return { offset, element: child };
            return closest;
        }, { offset: Number.NEGATIVE_INFINITY }).element;
        
        if (afterElement) list.insertBefore(window.dragEl, afterElement);
        else list.appendChild(window.dragEl);
        updateBadges(list);
    });

    function updateBadges(list) {
        list.querySelectorAll('.rank-badge').forEach((b, i) => b.innerText = i + 1);
    }

    // Playoff logika
    function startPlayoff() {
        const playoffList = document.getElementById('bracket-list');
        playoffList.innerHTML = '';
        const winners = [];
        const runnersUp = [];

        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const items = document.querySelectorAll(`#L-${letter} .t-name`);
            winners.push(items[0].innerText);
            runnersUp.push(items[1].innerText);
        }

        // Simulace pavouka pro mobil (prvn√≠ch 12 dvojic: v√≠tƒõz vs druh√Ω)
        // Na MS 2026 je to slo≈æitƒõj≈°√≠, ale pro zaƒç√°tek udƒõl√°me jasn√© dvojice
        for (let i = 0; i < 12; i++) {
            playoffList.innerHTML += `
                <div class="matchup">
                    <div class="matchup-title">Z√ÅPAS ${i+1}</div>
                    <div class="playoff-team" onclick="selectWinner(this)">${winners[i]} <span>1.m√≠sto ${String.fromCharCode(65+i)}</span></div>
                    <div class="playoff-team" onclick="selectWinner(this)">${runnersUp[(i+1)%12]} <span>2.m√≠sto</span></div>
                </div>
            `;
        }

        document.getElementById('playoff-section').style.display = 'block';
        window.scrollTo({ top: document.getElementById('playoff-section').offsetTop, behavior: 'smooth' });
    }

    function selectWinner(el) {
        const parent = el.parentElement;
        parent.querySelectorAll('.playoff-team').forEach(t => t.classList.remove('selected'));
        el.classList.add('selected');
    }

    // Z√°kladn√≠ podpora pro touch (mobil)
    function setupTouch() {
        // Implementace jednoduch√©ho swapu pro mobil by byla na del≈°√≠ k√≥d, 
        // pro teƒè nechejme drag&drop, kter√Ω v modern√≠ch prohl√≠≈æeƒç√≠ch na mobilu funguje.
    }

    window.onload = init;
</script>

</body>
</html>
