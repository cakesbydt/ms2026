<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MS 2026 Tipovaƒçka</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
            --hover: #334155;
            --success: #22c55e;
        }

        body { 
            background: var(--bg-color); 
            color: var(--text); 
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
        }

        .tournament-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .main-title {
            text-align: center;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 40px;
        }

        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .group-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #334155;
        }

        .group-card h3 {
            text-align: center;
            color: var(--accent);
            margin-top: 0;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }

        .team-list { 
            list-style: none; 
            padding: 0; 
            margin: 0;
            min-height: 100px;
        }

        .team-item {
            background: #334155;
            margin: 10px 0;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: grab;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .team-item.dragging { opacity: 0.5; background: var(--accent); }

        .rank-badge {
            background: var(--bg-color);
            width: 28px;
            height: 28px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
            color: var(--accent);
        }

        .actions { text-align: center; margin-top: 50px; }

        .btn-confirm {
            background: var(--accent);
            color: var(--bg-color);
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
        }

        /* Nov√° sekce pro v√Ωsledky */
        #results-section {
            margin-top: 50px;
            display: none;
            padding: 30px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 20px;
            border: 1px dashed var(--accent);
        }

        .qualified-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .qual-item {
            background: var(--card-bg);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid var(--success);
        }
    </style>
</head>
<body>

<div class="tournament-container">
    <h1 class="main-title">üèÜ MS 2026 Tipovaƒçka</h1>
    
    <div id="groups-grid" class="groups-grid"></div>

    <div class="actions">
        <button class="btn-confirm" onclick="generatePlayoff()">Potvrdit skupiny a uk√°zat postupuj√≠c√≠ ‚Üí</button>
    </div>

    <div id="results-section">
        <h2 style="text-align: center; color: var(--success);">Postupuj√≠c√≠ do vy≈ôazovac√≠ch boj≈Ø</h2>
        <div id="qualified-list" class="qualified-grid"></div>
    </div>
</div>

<script>
    const teams = [
        "ƒåesko", "Slovensko", "Braz√≠lie", "Argentina", "Francie", "Anglie", "≈†panƒõlsko", "It√°lie",
        "Nƒõmecko", "Portugalsko", "Nizozemsko", "Belgie", "Chorvatsko", "Uruguay", "Maroko", "Japonsko",
        "USA", "Mexiko", "Kanada", "Senegal", "Polsko", "D√°nsko", "≈†v√Ωcarsko", "Srbsko",
        "Korea", "Austr√°lie", "Egypt", "Tunisko", "Nig√©rie", "Al≈æ√≠rsko", "Katar", "Sa√∫dsk√° Ar√°bie",
        "Rakousko", "Turecko", "Ukrajina", "Maƒèarsko", "Norsko", "≈†v√©dsko", "Skotsko", "Wales",
        "Kolumbie", "Chile", "Ekv√°dor", "Peru", "Paraguay", "Ghana", "Kamerun", "Island"
    ];

    function initTournament() {
        const grid = document.getElementById('groups-grid');
        let teamIndex = 0;

        for (let i = 0; i < 12; i++) {
            const groupLetter = String.fromCharCode(65 + i);
            const groupTeams = teams.slice(teamIndex, teamIndex + 4);
            teamIndex += 4;

            const groupHtml = `
                <div class="group-card">
                    <h3>Skupina ${groupLetter}</h3>
                    <ul class="team-list" id="list-${groupLetter}" ondragover="handleDragOver(event)">
                        ${groupTeams.map((team, index) => `
                            <li class="team-item" draggable="true" ondragstart="handleDragStart(event)" ondragend="handleDragEnd(event)">
                                <span class="team-name">${team}</span>
                                <span class="rank-badge">${index + 1}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
            grid.innerHTML += groupHtml;
        }
    }

    let draggingElement = null;

    function handleDragStart(e) {
        draggingElement = e.target;
        e.target.classList.add('dragging');
    }

    function handleDragOver(e) {
        e.preventDefault();
        const list = e.target.closest('.team-list');
        const afterElement = getDragAfterElement(list, e.clientY);
        if (afterElement == null) {
            list.appendChild(draggingElement);
        } else {
            list.insertBefore(draggingElement, afterElement);
        }
        updateBadges(list);
    }

    function handleDragEnd(e) {
        e.target.classList.remove('dragging');
        draggingElement = null;
    }

    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.team-item:not(.dragging)')];
        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    function updateBadges(list) {
        const badges = list.querySelectorAll('.rank-badge');
        badges.forEach((badge, index) => {
            badge.innerText = index + 1;
        });
    }

    // NOV√Å FUNKCE: Generov√°n√≠ postupuj√≠c√≠ch
    function generatePlayoff() {
        const qualifiedList = document.getElementById('qualified-list');
        qualifiedList.innerHTML = '';
        const resultsSection = document.getElementById('results-section');
        
        for (let i = 0; i < 12; i++) {
            const groupLetter = String.fromCharCode(65 + i);
            const list = document.getElementById(`list-${groupLetter}`);
            const items = list.querySelectorAll('.team-item');
            
            // Vezmeme prvn√≠ dva z ka≈æd√© skupiny
            const winner = items[0].querySelector('.team-name').innerText;
            const runnerUp = items[1].querySelector('.team-name').innerText;

            qualifiedList.innerHTML += `
                <div class="qual-item"><strong>${groupLetter}1:</strong> ${winner}</div>
                <div class="qual-item"><strong>${groupLetter}2:</strong> ${runnerUp}</div>
            `;
        }

        resultsSection.style.display = 'block';
        window.scrollTo({ top: resultsSection.offsetTop, behavior: 'smooth' });
    }

    window.onload = initTournament;
</script>

</body>
</html>
