function renderLeaderboard(data, real) {
    const body = document.getElementById('public-body');
    const processed = data.map(row => {
        const tip = typeof row.tip_data === 'string' ? JSON.parse(row.tip_data) : row.tip_data;
        let pts = 0;
        // V√Ωpoƒçet bod≈Ø (ponech√°no beze zmƒõny)
        if(real.groups) real.groups.forEach((rg, i) => { if(tip.groups?.[i]) rg.forEach((t, p) => { if(t && tip.groups[i][p] === t) pts += 2; }); });
        const check = (st, p) => { if(real[st] && tip[st]) tip[st].forEach(t => { if(real[st].includes(t)) pts += p; }); };
        check('s32', 2); check('s16', 3); check('s8', 5); check('s4', 8);
        if(real.winner && tip.winner === real.winner) pts += 15;
        if(real.bronze && tip.bronze === real.bronze) pts += 10;
        return { ...row, tip, points: pts };
    }).sort((a,b) => b.points - a.points);

    body.innerHTML = processed.map((r, i) => `
        <tr class="player-row" onclick="toggleDetail('det-${r.id}')">
            <td style="width: 40px; color: #94a3b8;">${i+1}.</td>
            <td style="font-weight:bold; color: var(--accent);">${r.name}</td>
            <td style="text-align:right; font-weight:bold;">${r.points}</td>
        </tr>
        <tr id="det-${r.id}" class="tip-detail-row">
            <td colspan="3">
                <div class="detail-container">
                    <div class="det-groups-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 25px;">
                        ${(r.tip.groups||[]).map((g, idx) => `
                            <div class="det-group-box" style="background: #1e293b; padding: 10px; border-radius: 8px; border: 1px solid #334155; font-size: 0.75rem;">
                                <b style="color: var(--accent); display: block; margin-bottom: 5px;">Sk. ${String.fromCharCode(65+idx)}</b>
                                ${g.map((t, p) => {
                                    const isCorrect = real.groups && real.groups[idx][p] === t;
                                    const isLocked = real.groups && real.groups[idx][p];
                                    const color = isLocked ? (isCorrect ? 'var(--winner)' : 'var(--lose)') : '#fff';
                                    return `<div style="color: ${color}">${p+1}. ${t}</div>`;
                                }).join('')}
                            </div>`).join('')}
                    </div>

                    <div style="color: var(--accent); font-weight: bold; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 15px; border-bottom: 1px solid #334155; padding-bottom: 5px;">PLAY-OFF PAVOUK</div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div style="display: flex; flex-direction: column; gap: 20px;">
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 10px; border-radius: 10px; border: 1px solid #334155;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase;">1/16 FIN√ÅLE</h5>
                                <div style="display: flex; flex-direction: column; gap: 4px;">
                                    ${(r.tip.s32||[]).map(t => `<span style="padding: 2px 8px; border-radius: 4px; border: 1px solid ${real.s32?.includes(t) ? 'var(--winner)' : (real.s32?.length ? 'var(--lose)' : '#334155')}; font-size: 0.75rem;">${t}</span>`).join('')}
                                </div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 10px; border-radius: 10px; border: 1px solid #334155;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase;">1/8 FIN√ÅLE</h5>
                                <div style="display: flex; flex-direction: column; gap: 4px;">
                                    ${(r.tip.s16||[]).map(t => `<span style="padding: 2px 8px; border-radius: 4px; border: 1px solid ${real.s16?.includes(t) ? 'var(--winner)' : (real.s16?.length ? 'var(--lose)' : '#334155')}; font-size: 0.75rem;">${t}</span>`).join('')}
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 20px;">
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 10px; border-radius: 10px; border: 1px solid #334155;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase;">ƒåTVRTFIN√ÅLE</h5>
                                <div style="display: flex; flex-direction: column; gap: 4px;">
                                    ${(r.tip.s8||[]).map(t => `<span style="padding: 2px 8px; border-radius: 4px; border: 1px solid ${real.s8?.includes(t) ? 'var(--winner)' : (real.s8?.length ? 'var(--lose)' : '#334155')}; font-size: 0.75rem;">${t}</span>`).join('')}
                                </div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 10px; border-radius: 10px; border: 1px solid #334155;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase;">SEMIFIN√ÅLE</h5>
                                <div style="display: flex; flex-direction: column; gap: 4px;">
                                    ${(r.tip.s4||[]).map(t => `<span style="padding: 2px 8px; border-radius: 4px; border: 1px solid ${real.s4?.includes(t) ? 'var(--winner)' : (real.s4?.length ? 'var(--lose)' : '#334155')}; font-size: 0.75rem;">${t}</span>`).join('')}
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 20px;">
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 15px; border-radius: 12px; border: 2px solid gold;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: gold; text-transform: uppercase;">ü•á V√çTƒöZ</h5>
                                <div style="padding: 5px; border-radius: 6px; border: 1px solid ${real.winner === r.tip.winner ? 'var(--winner)' : (real.winner ? 'var(--lose)' : 'gold')}; text-align: center; font-weight: bold;">${r.tip.winner}</div>
                            </div>
                            <div style="background: rgba(30, 41, 59, 0.5); padding: 15px; border-radius: 12px; border: 2px solid #cd7f32;">
                                <h5 style="margin: 0 0 10px 0; font-size: 0.7rem; color: #cd7f32; text-transform: uppercase;">ü•â 3. M√çSTO</h5>
                                <div style="padding: 5px; border-radius: 6px; border: 1px solid ${real.bronze === r.tip.bronze ? 'var(--winner)' : (real.bronze ? 'var(--lose)' : '#cd7f32')}; text-align: center; font-weight: bold;">${r.tip.bronze}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    `).join('');
}
