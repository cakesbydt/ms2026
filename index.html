<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MS 2026 Tipovaƒçka</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
            --winner: #22c55e;
            --warning: #f59e0b;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: -apple-system, system-ui, sans-serif;
            margin: 0; padding: 10px; line-height: 1.4;
            padding-bottom: 100px;
        }

        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; color: var(--accent); font-size: 1.4rem; margin: 15px 0; }

        .groups-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 10px; margin-bottom: 20px;
        }

        .group-header {
            background: var(--card); border: 1px solid #334155;
            border-radius: 8px; padding: 15px 5px; text-align: center;
            cursor: pointer; font-weight: bold; font-size: 0.8rem;
        }

        .group-header.active { background: var(--accent); color: var(--bg); }

        .group-content {
            display: none; position: absolute; z-index: 100;
            background: #1e293b; padding: 10px; border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5); width: 220px;
            left: 50%; transform: translateX(-50%); border: 1px solid var(--accent);
        }

        .team-item {
            background: #334155; margin: 5px 0; padding: 10px;
            border-radius: 6px; display: flex; justify-content: space-between;
        }

        .btn-main {
            width: 100%; background: var(--accent); color: var(--bg);
            border: none; padding: 15px; font-weight: bold;
            border-radius: 10px; margin: 10px 0; font-size: 1rem; cursor: pointer;
        }

        #third-place-section, .playoff-stage { display: none; margin-top: 30px; }
        
        .stage-title { 
            text-align: center; background: var(--accent); color: var(--bg); 
            padding: 5px; border-radius: 5px; margin: 20px 0 10px;
        }

        .matchup { 
            background: var(--card); padding: 10px; border-radius: 10px; 
            margin-bottom: 10px; border: 1px solid #334155; 
        }

        .playoff-team { 
            padding: 12px; background: #334155; margin: 4px 0; 
            border-radius: 6px; cursor: pointer; display: flex; justify-content: space-between;
        }

        .playoff-team.selected { background: var(--winner); font-weight: bold; }
        
        .third-item {
            background: var(--card); padding: 10px; border-radius: 6px;
            margin: 4px; cursor: pointer; text-align: center; border: 1px solid #334155;
        }
        .third-item.selected { background: var(--warning); color: var(--bg); }

        .final-winner {
            text-align: center; padding: 20px; background: gold; color: black;
            border-radius: 15px; font-weight: bold; font-size: 1.5rem; margin-top: 20px;
            display: none; animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }
    </style>
</head>
<body>

<div class="container">
    <h1>üèÜ MS 2026 TIPOVAƒåKA</h1>
    
    <div class="groups-grid" id="groups-grid"></div>

    <button id="confirm-groups-btn" class="btn-main" onclick="showThirdPlaceSelection()">POTVRDIT SKUPINY</button>

    <div id="third-place-section">
        <h3 style="color:var(--warning)">Vyber 8 t√Ωm≈Ø ze 3. m√≠st</h3>
        <div id="third-place-list" style="display:grid; grid-template-columns: 1fr 1fr;"></div>
        <button class="btn-main" style="background:var(--warning)" onclick="startRoundOf32()">HR√ÅT ≈†ESTN√ÅCTIFIN√ÅLE</button>
    </div>

    <div id="s32" class="playoff-stage"><div class="stage-title">≈†ESTN√ÅCTIFIN√ÅLE (1/16)</div><div id="m32"></div></div>
    <div id="s16" class="playoff-stage"><div class="stage-title">OSMIFIN√ÅLE</div><div id="m16"></div></div>
    <div id="s8" class="playoff-stage"><div class="stage-title">ƒåTVRTFIN√ÅLE</div><div id="m8"></div></div>
    <div id="s4" class="playoff-stage"><div class="stage-title">SEMIFIN√ÅLE</div><div id="m4"></div></div>
    <div id="s2" class="playoff-stage"><div class="stage-title">FIN√ÅLE</div><div id="m2"></div></div>

    <div id="champion-box" class="final-winner"></div>
</div>

<script>
    const teams = ["ƒåesko", "Slovensko", "Braz√≠lie", "Argentina", "Francie", "Anglie", "≈†panƒõlsko", "It√°lie", "Nƒõmecko", "Portugalsko", "Nizozemsko", "Belgie", "Chorvatsko", "Uruguay", "Maroko", "Japonsko", "USA", "Mexiko", "Kanada", "Senegal", "Polsko", "D√°nsko", "≈†v√Ωcarsko", "Srbsko", "Korea", "Austr√°lie", "Egypt", "Tunisko", "Nig√©rie", "Al≈æ√≠rsko", "Katar", "Sa√∫dsk√° Ar√°bie", "Rakousko", "Turecko", "Ukrajina", "Maƒèarsko", "Norsko", "≈†v√©dsko", "Skotsko", "Wales", "Kolumbie", "Chile", "Ekv√°dor", "Peru", "Paraguay", "Ghana", "Kamerun", "Island"];

    function init() {
        const grid = document.getElementById('groups-grid');
        for (let i = 0; i < 12; i++) {
            const letter = String.fromCharCode(65 + i);
            const gTeams = teams.slice(i * 4, i * 4 + 4);
            grid.innerHTML += `
                <div style="position:relative">
                    <div class="group-header" id="h-${letter}" onclick="toggleGroup('${letter}')">Skupina ${letter}</div>
                    <div class="group-content" id="c-${letter}">
                        <div id="L-${letter}">${gTeams.map((t, idx) => `<div class="team-item" onclick="moveUp(this,'${letter}')"><span>${t}</span><span style="opacity:0.5">${idx+1}</span></div>`).join('')}</div>
                        <button class="btn-main" onclick="toggleGroup('${letter}')">Hotovo</button>
                    </div>
                </div>`;
        }
    }

    function toggleGroup(l) {
        const c = document.getElementById(`c-${l}`);
        const isVisible = c.style.display === 'block';
        document.querySelectorAll('.group-content').forEach(el => el.style.display = 'none');
        c.style.display = isVisible ? 'none' : 'block';
        document.getElementById(`h-${l}`).classList.add('active');
    }

    function moveUp(el, l) {
        const list = document.getElementById(`L-${l}`);
        if (el.previousElementSibling) list.insertBefore(el, el.previousElementSibling);
        else list.appendChild(el);
    }

    function showThirdPlaceSelection() {
        const list = document.getElementById('third-place-list');
        list.innerHTML = '';
        for (let i = 0; i < 12; i++) {
            const l = String.fromCharCode(65 + i);
            const team = document.querySelectorAll(`#L-${l} span:first-child`)[2].innerText;
            list.innerHTML += `<div class="third-item" onclick="selectThird(this)">${team} (${l})</div>`;
        }
        document.getElementById('third-place-section').style.display = 'block';
        document.getElementById('confirm-groups-btn').style.display = 'none';
    }

    function selectThird(el) {
        if (!el.classList.contains('selected') && document.querySelectorAll('.third-item.selected').length >= 8) return;
        el.classList.toggle('selected');
    }

    function startRoundOf32() {
        const selected = document.querySelectorAll('.third-item.selected');
        if (selected.length !== 8) return alert("Vyber 8 t√Ωm≈Ø!");
        
        let finalists = [];
        for (let i = 0; i < 12; i++) {
            const l = String.fromCharCode(65 + i);
            const items = document.querySelectorAll(`#L-${l} span:first-child`);
            finalists.push(items[0].innerText, items[1].innerText);
        }
        selected.forEach(t => finalists.push(t.innerText.split(' (')[0]));
        
        buildStage(finalists, 'm32', 's32', 16, 'm16', 's16');
    }

    function buildStage(teams, containerId, sectionId, matchCount, nextContainerId, nextSectionId) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        for (let i = 0; i < matchCount; i++) {
            container.innerHTML += `
                <div class="matchup">
                    <div class="playoff-team" onclick="pick(this, '${nextContainerId}', '${nextSectionId}', ${i})">${teams[i*2] || '???'}</div>
                    <div class="playoff-team" onclick="pick(this, '${nextContainerId}', '${nextSectionId}', ${i})">${teams[i*2+1] || '???'}</div>
                </div>`;
        }
        document.getElementById(sectionId).style.display = 'block';
        window.scrollTo({ top: document.getElementById(sectionId).offsetTop, behavior: 'smooth' });
    }

    function pick(el, nextContainerId, nextSectionId, matchIdx) {
        const parent = el.parentElement;
        parent.querySelectorAll('.playoff-team').forEach(t => t.classList.remove('selected'));
        el.classList.add('selected');

        const winnerName = el.innerText;
        
        // Logika pro posun do dal≈°√≠ho kola
        if (nextContainerId === 'undefined') {
            const box = document.getElementById('champion-box');
            box.innerText = "MISTR SVƒöTA: " + winnerName;
            box.style.display = 'block';
            return;
        }

        let nextStageCount;
        if (nextContainerId === 'm16') nextStageCount = 8;
        else if (nextContainerId === 'm8') nextStageCount = 4;
        else if (nextContainerId === 'm4') nextStageCount = 2;
        else if (nextContainerId === 'm2') nextStageCount = 1;

        if (!document.getElementById(nextContainerId).innerHTML) {
            const emptyTeams = Array(nextStageCount * 2).fill('???');
            buildStage(emptyTeams, nextContainerId, nextSectionId, nextStageCount, getNextStage(nextContainerId)[0], getNextStage(nextContainerId)[1]);
        }

        const nextMatchups = document.querySelectorAll(`#${nextContainerId} .matchup`);
        const targetMatchIdx = Math.floor(matchIdx / 2);
        const teamPos = matchIdx % 2;
        nextMatchups[targetMatchIdx].querySelectorAll('.playoff-team')[teamPos].innerText = winnerName;
    }

    function getNextStage(id) {
        if (id === 'm16') return ['m8', 's8'];
        if (id === 'm8') return ['m4', 's4'];
        if (id === 'm4') return ['m2', 's2'];
        return ['undefined', 'undefined'];
    }

    window.onload = init;
</script>
</body>
</html>
